(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-99b52264"],{"90fe":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"top"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px",inline:""}},[a("el-form-item",[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"datetimerange","picker-options":t.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}}),a("el-button",{staticClass:"ml-2",attrs:{type:"primary"},on:{click:t.findAll}},[t._v("查询")])],1)]),a("el-form-item",{staticClass:"ml-3",attrs:{label:"审核人"}},[a("el-input",{attrs:{placeholder:"审核人"},model:{value:t.form.input,callback:function(e){t.$set(t.form,"input",e)},expression:"form.input"}})],1),a("el-form-item",{staticClass:"ml-3",attrs:{label:"活动范围"}},[a("el-select",{attrs:{placeholder:"请选择活动范围"},model:{value:t.form.value,callback:function(e){t.$set(t.form,"value",e)},expression:"form.value"}},[a("el-option",{attrs:{label:"区域一",value:"x"}}),a("el-option",{attrs:{label:"区域二",value:"a"}})],1)],1)],1)],1),a("div",{staticClass:"base-table"},[a("el-table",{attrs:{data:t.tableData,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{align:"center",label:"序号",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.$index)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"姓名",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.name)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"性别"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.sex)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"学号"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.schoolNumber)+" ")]}}])}),a("el-table-column",{attrs:{label:"签到时间",prop:"date"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.startTime)+" ")]}}])}),a("el-table-column",{attrs:{label:"结束时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.endTime)+" ")]}}])}),a("el-table-column",{attrs:{label:"学习记录",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.content)+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.endSign(e.row)}}},[t._v("结签")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.patchSign(e.row)}}},[t._v("补签")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.toDetails(e.row)}}},[t._v("详情")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.toDetailsEcharts(e.row)}}},[t._v("签到详情")])]}}])})],1),a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":t.pageNum,"page-size":10,layout:"total,prev, pager, next",total:t.totalNum},on:{"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"请输入要结束的时间",visible:t.centerDialogVisible2,width:"30%",center:""},on:{"update:visible":function(e){t.centerDialogVisible2=e}}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"Select date and time"},model:{value:t.value5,callback:function(e){t.value5=e},expression:"value5"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.centerDialogVisible2=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submit2}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"请输入要查询的范围",visible:t.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"请输入要补签的的范围",visible:t.centerDialogVisibles,width:"30%",center:""},on:{"update:visible":function(e){t.centerDialogVisibles=e}}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","range-separator":"To","start-placeholder":"Start date","end-placeholder":"End date"},model:{value:t.value3,callback:function(e){t.value3=e},expression:"value3"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.patchSignSubmit}},[t._v("确 定")])],1)],1)],1)},i=[],l=a("bc3a"),o=a.n(l),s={data:function(){return{totalNum:0,pageNum:1,token:JSON.parse(sessionStorage.getItem("adminInfo")).data.token||"",nameList:"",timeList:"",curCheckName:"",startTime:"",endTime:"",centerDialogVisible:!1,centerDialogVisibles:!1,centerDialogVisible2:!1,currentPage1:5,currentPage2:5,currentPage3:5,currentPage4:4,tableData:[],form:{value:"",input:""},list:null,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},value1:"",value2:"",value3:"",value5:""}},created:function(){this.getStudentSign()},methods:{patchSignSubmit:function(){var t=this;console.log(this.curCheckName),console.log(this.value3[0]),console.log(this.value3[1]),o()({url:"/dev/sign_supply",method:"post",data:{username:this.curCheckName,start_time:this.value3[0],end_time:this.value3[1]}}).then((function(e){console.log(e),t.centerDialogVisibles=!1}))},patchSign:function(t){this.curCheckName=t.schoolNumber,this.centerDialogVisibles=!0},getNowTime:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var n=t.getDate();n=n<10?"0"+n:n;t.getDay();var i=t.getHours();i=i<10?"0"+i:i;var l=t.getMinutes();l=l<10?"0"+l:l;var o=t.getSeconds();return o=o<10?"0"+o:o,e+"-"+a+"-"+n+" "+i+":"+l+":"+o},endSign:function(t){this.centerDialogVisible2=!0,this.curCheckName=t.schoolNumber},findAll:function(){var t=this,e=JSON.parse(sessionStorage.getItem("adminInfo")).data||"",a=e.token;""!=this.value2?o()({url:"/dev/query_all_time",method:"post",data:{start_date:this.value2[0],end_date:this.value2[1],token:a}}).then((function(e){console.log(e),console.log(e.data.status),"202"==e.data.status&&(t.$message.warning(e.data.msg),setTimeout((function(){t.$router.push("/login")}),2e3)),t.nameList=e.data.data[0],t.timeList=e.data.data[1],t.$router.push({path:"/student/echarts",query:{nameList:t.nameList,timeList:t.timeList}})})):this.$message.warning("请选择日期")},getStudentSign:function(){var t=this;o()({url:"/dev/query_student_time",method:"post",data:{token:this.token,pageNum:this.pageNum}}).then((function(e){console.log(e),202==e.data.status&&(t.$message.warning(e.data.msg),setTimeout((function(){t.$router.push("/login")}),1e3)),t.totalNum=e.data.total,t.tableData=e.data.data}))},handleSizeChange:function(t){console.log("每页 ".concat(t," 条"))},handleCurrentChange:function(t){this.pageNum=t,this.getStudentSign()},toDetails:function(t){var e=this;o()({url:"/dev/query_student_time_single",method:"post",data:{token:this.token,pageNum:this.pageNum,schoolNum:t.schoolNumber}}).then((function(a){console.log(a),e.$router.push({path:"/student/perInfo",query:{row:t,data:a.data.data,total:a.data.totalNum}})}))},toDetailsEcharts:function(t){console.log(t),this.curCheckName=t.schoolNumber,this.centerDialogVisible=!0},submit2:function(){var t=this;o()({url:"/dev/end_sign",method:"post",data:{username:this.curCheckName,time:this.value5}}).then((function(e){200==e.data.status?(t.getStudentSign(),console.log(e),t.$message.success(e.data.msg),t.centerDialogVisible2=!1):t.$message.warning(e.data.msg)}))},submit:function(){var t=this;this.startTime=this.value1[0],this.endTime=this.value1[1],o()({url:"/dev/query_student_date_time",method:"post",data:{username:this.curCheckName,start_date:this.startTime,end_date:this.endTime}}).then((function(e){console.log(e);e.data;t.value1?t.$router.push({path:"/student/detailsEcharts",query:{start_date:t.startTime,end_date:t.endTime,data:e.data.data}}):t.$message.error("请输入正确的日期")}))}}},r=s,u=(a("a221"),a("2877")),c=Object(u["a"])(r,n,i,!1,null,null,null);e["default"]=c.exports},a221:function(t,e,a){"use strict";a("aae0")},aae0:function(t,e,a){}}]);